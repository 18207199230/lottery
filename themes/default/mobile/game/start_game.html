<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>青蛙抓害虫</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <script src="__PUBLIC__/js/jquery/jquery-2.0.3.min.js" type="text/javascript" charset="utf-8"></script>
    <link href="__PUBLIC__/jquery-weui/dist/lib/weui.min.css" type="text/css" rel="Stylesheet"/>
    <link href="__PUBLIC__/jquery-weui/dist/css/jquery-weui.min.css" type="text/css" rel="Stylesheet"/>
    <link rel="stylesheet" href="__PUBLIC__/act/flog/css/style.css">
    <link rel="stylesheet" href="__PUBLIC__/layer/skin/default/layer.css">

    <script type="text/javascript" src="__PUBLIC__/layer/layer.js"></script>
    <script src="__PUBLIC__/act/flog/js/prefixfree.min.js"></script>

</head>

<body>
<div class="environment">
    <div class="sky"></div>
    <div class="stars"></div>
    <div class="sun"></div>
    <div class="moon"></div>
    <div class="mountains">
        <div class="mountain">
            <div class="trees">
                <div class="tree"></div>
                <div class="tree tree--2"></div>
                <div class="tree tree--3"></div>
                <div class="tree tree--4"></div>
            </div>
        </div>
        <div class="mountain mountain--2"></div>
    </div>
    <div class="water"></div>
    <div class="lily lilly-1"></div>
</div>

<div class="player">

    <div class="legs">
        <div class="leg leg--left">
        </div>
        <div class="leg leg--right">
        </div>
    </div>

    <div class="body">
        <div class="crown"></div>
        <div class="belly"></div>
        <div class="arms">
            <div class="arm arm--left">
                <div class="hand">
                    <div class="toe"></div>
                    <div class="toe"></div>
                    <div class="toe"></div>
                </div>
            </div>
            <div class="arm arm--right">
                <div class="hand">
                    <div class="toe"></div>
                    <div class="toe"></div>
                    <div class="toe"></div>
                </div>
            </div>
        </div>
        <div class="mouth">
            <div class="top-lip"></div>
            <div class="bottom-lip"></div>
            <div class="tongue">
                <div class="tongue-inner">
                    <div class="fly is-dead"></div>
                </div>
            </div>
        </div>
        <div class="eyes">
            <div class="eye eye--left">
                <div class="pupil"></div>
            </div>
            <div class="eye eye--right">
                <div class="pupil"></div>
            </div>
        </div>
    </div>
</div>

<div class="screen menu" style="">
    <a href="#" class="btn play" onClick="" style="font-size: 30px;">
        <span>倒计时</span><br>
        <span class="js-best-s" style="color: red;font-size: 38px;font-weight: bold;">4</span>
    </a>
</div>

<div class="screen game">
    <div class="hud" style="color:red">
        <div class="time">
            <span class="label">时间</span>
            <span class="value js-time">25</span>
        </div>

        <div class="score">
            <span class="label">分数</span>
            <span class="value js-score">0</span>
        </div>
    </div>

    <div class="flies">
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
        <div class="path">
            <div class="target">
                <div class="fly"></div>
            </div>
        </div>
    </div>
</div>
<div class="screen win" style="color:red">
    <h1>完成</h1>
    <div class="card">
        <h3 class="highscore js-highscore is-hidden">新高分！</h3>

        <div class="score" style="float:none;font-size: 20px;">
            <span class="label">分数</span>
            <span class="value js-score">30</span>
        </div>

        <div class="best" style="display: none;">
            <span class="label">最好</span>
            <span class="value js-best">0</span>
        </div>

    </div>
    <a href="/mobile/game/draw_room/home_id/{$recordInfo.game_home_id}" class="btn btn--clear" onClick="menu()">确定</a>
</div>

<div class="screen settings">
    <h1>设置</h1>

    <div class="card">
        <label class="checkbox">
            <input type="radio" name="theme" value="light" checked onClick="toggleTheme(this.value)">
            <span>白天时间</span>
        </label>
        <label class="checkbox">
            <input type="radio" name="theme" value="dark" onClick="toggleTheme(this.value)">
            <span>晚上时间</span>
        </label>
    </div>

    <a href="#" class="btn js-toggle-music" onClick="toggleMusic()">打开音乐</a>

    <a href="#" class="btn" onClick="menu()">返回</a>
</div>
<div class="screen scoreboard">
    <h1>记分牌</h1>
    <div class="card">
        <ol class="scoreboard-list js-scoreboard"></ol>
    </div>

    <a href="#" class="btn" onClick="menu()">返回</a>
</div>

<audio id="music" src="https://www.dl-sounds.com/wp-content/uploads/edd/2015/09/Ducky-Duck-preview.mp3"></audio>
<script src="__PUBLIC__/act/flog/js/index.js"></script>
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
    '{if condition="in_wechat()"}'
    wx.config({
        debug: false,
        appId: '{$signPackage.appId}',
        timestamp: '{$signPackage.timestamp}',
        nonceStr: '{$signPackage.nonceStr}',
        signature: '{$signPackage.signature}',
        jsApiList: [
            'checkJsApi',
            'onMenuShareTimeline',
            'onMenuShareAppMessage',
            'onMenuShareQQ',
            'onMenuShareWeibo',
            'onMenuShareQZone',
            'hideMenuItems',
            'showMenuItems',
            'hideAllNonBaseMenuItem',
            'showAllNonBaseMenuItem',
            'translateVoice',
            'startRecord',
            'stopRecord',
            'onVoiceRecordEnd',
            'playVoice',
            'onVoicePlayEnd',
            'pauseVoice',
            'stopVoice',
            'uploadVoice',
            'downloadVoice',
            'chooseImage',
            'previewImage',
            'uploadImage',
            'downloadImage',
            'getNetworkType',
            'openLocation',
            'getLocation',
            'hideOptionMenu',
            'showOptionMenu',
            'closeWindow',
            'scanQRCode',
            'chooseWXPay',
            'openProductSpecificView',
            'addCard',
            'chooseCard',
            'openCard',
            'chooseWXPay'
        ]
    });
    '{/if}'
</script>
<script>
    // 2. 分享接口
    // 2.1 监听“分享给朋友”，按钮点击、自定义分享内容及分享结果接口
    wx.ready(function () {
        wx.hideOptionMenu();
    });
    wx.error(function (res) {
        alert(res.errMsg);
    });
    var home_id = '{$recordInfo.game_home_id}';
    var game_record_id = '{$recordInfo.game_record_id}';
    var i = 4;
    setInterval(function () {
        $(".js-best-s").html(i)
        i--
    }, 1000)
    setTimeout(function () {
        $('.menu').hide();
        play();
    }, 5000);

    function saveGameScores(score) {
        $.post("{:url('game/set_grade')}", {
                'home_id': home_id,
                'game_record_id': game_record_id,
                'grade': score,
            },
            function (r) {
                location.href = '/mobile/game/draw_room/home_id/' + home_id;
            });
    }
</script>
</body>
</html>
